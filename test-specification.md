# 営業日報システム テスト仕様書

## 目次
1. [テスト概要](#テスト概要)
2. [テスト方針](#テスト方針)
3. [テスト環境](#テスト環境)
4. [テスト項目一覧](#テスト項目一覧)
5. [機能テスト詳細](#機能テスト詳細)
   - [認証機能テスト](#認証機能テスト)
   - [日報機能テスト](#日報機能テスト)
   - [訪問記録機能テスト](#訪問記録機能テスト)
   - [コメント機能テスト](#コメント機能テスト)
   - [顧客マスタテスト](#顧客マスタテスト)
   - [営業マスタテスト](#営業マスタテスト)
6. [非機能テスト](#非機能テスト)
7. [テスト実施記録](#テスト実施記録)

---

## テスト概要

### 目的
営業日報システムの品質を保証し、要件定義書および画面定義書に記載された機能が正しく動作することを確認する。

### 対象範囲
- フロントエンド（画面UI、画面遷移）
- バックエンド（API、ビジネスロジック）
- データベース（データの整合性）
- 認証・認可機能
- セキュリティ

### テストレベル

| テストレベル | 対象 | 担当 |
|------------|------|------|
| 単体テスト (Unit Test) | 個別の関数、コンポーネント | 開発者 |
| 結合テスト (Integration Test) | API、モジュール間連携 | 開発者 |
| システムテスト (System Test) | システム全体の動作 | QAチーム |
| ユーザー受け入れテスト (UAT) | 業務フローの確認 | ユーザー |

---

## テスト方針

### 基本方針
1. **網羅性**: 全機能の正常系・異常系をカバー
2. **再現性**: 同じ手順で同じ結果が得られること
3. **自動化**: 可能な限りテストを自動化
4. **早期発見**: 開発段階から継続的にテストを実施

### テストの優先度

| 優先度 | 定義 | 対応 |
|--------|------|------|
| P0 | システムの基本機能に関わる重大な問題 | 即座に修正必須 |
| P1 | 主要機能に影響する問題 | リリース前に修正必須 |
| P2 | 軽微な問題、使いにくさ | リリース後の修正可 |
| P3 | 改善提案、将来的な対応 | 優先度低 |

### テストデータ
- 本番環境のデータは使用しない
- テスト用のマスタデータを事前に準備
- テスト実施後はデータをクリーンアップ

---

## テスト環境

### テスト環境仕様

| 項目 | 内容 |
|------|------|
| OS | macOS / Windows / Linux |
| ブラウザ | Chrome (最新版), Safari (最新版), Firefox (最新版) |
| データベース | PostgreSQL 15.x (テスト用DB) |
| APIサーバー | Node.js 20.x / Python 3.11.x (開発環境) |
| フロントエンド | React 18.x / Vue 3.x (想定) |

### テストアカウント

| 役割 | メールアドレス | パスワード | 備考 |
|------|---------------|-----------|------|
| 営業 | sales01@test.com | Test1234! | 一般営業担当者 |
| 営業 | sales02@test.com | Test1234! | 一般営業担当者 |
| 上長 | manager01@test.com | Test1234! | 営業部長 |
| 管理者 | admin@test.com | Admin1234! | システム管理者 |

### テストデータ

#### 顧客マスタ
- テスト顧客A（株式会社テストA）
- テスト顧客B（株式会社テストB）
- テスト顧客C（株式会社テストC）

---

## テスト項目一覧

### 機能テスト項目サマリー

| カテゴリ | テスト項目数 | 備考 |
|---------|------------|------|
| 認証機能 | 8 | ログイン、ログアウト |
| 日報機能 | 25 | 作成、編集、削除、一覧、詳細 |
| 訪問記録機能 | 12 | 追加、編集、削除 |
| コメント機能 | 10 | 投稿、削除、表示 |
| 顧客マスタ | 15 | CRUD操作 |
| 営業マスタ | 15 | CRUD操作（管理者のみ） |
| 権限制御 | 10 | ロール別アクセス制御 |
| **合計** | **95** | - |

### 非機能テスト項目

| カテゴリ | テスト項目 |
|---------|-----------|
| パフォーマンス | レスポンス時間、同時接続数 |
| セキュリティ | XSS、SQLインジェクション、CSRF |
| ユーザビリティ | レスポンシブデザイン、アクセシビリティ |
| 互換性 | ブラウザ互換性、デバイス互換性 |

---

## 機能テスト詳細

### 認証機能テスト

#### TC-AUTH-001: ログイン成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-001 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 有効なユーザーアカウントが存在する<br>- ログアウト状態 |
| **テスト手順** | 1. ログイン画面にアクセス<br>2. 正しいメールアドレスを入力<br>3. 正しいパスワードを入力<br>4. ログインボタンをクリック |
| **期待結果** | - ダッシュボード（S-02）に遷移する<br>- ヘッダーにユーザー名が表示される<br>- JWTトークンが発行され、ローカルストレージまたはCookieに保存される |
| **実施結果** | |
| **備考** | 全ロール（営業、上長、管理者）で実施 |

---

#### TC-AUTH-002: ログイン失敗 - 誤ったパスワード（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-002 |
| **優先度** | P0 |
| **カテゴリ** | 異常系 |
| **前提条件** | - ログアウト状態 |
| **テスト手順** | 1. ログイン画面にアクセス<br>2. 正しいメールアドレスを入力<br>3. 誤ったパスワードを入力<br>4. ログインボタンをクリック |
| **期待結果** | - ログイン画面に留まる<br>- 「メールアドレスまたはパスワードが正しくありません」のエラーメッセージが表示される<br>- 入力したパスワードはクリアされる |
| **実施結果** | |
| **備考** | セキュリティ: メールアドレスの存在を推測されないよう、メールアドレス不正の場合も同じメッセージを表示 |

---

#### TC-AUTH-003: ログイン失敗 - 存在しないメールアドレス（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-003 |
| **優先度** | P0 |
| **カテゴリ** | 異常系 |
| **前提条件** | - ログアウト状態 |
| **テスト手順** | 1. ログイン画面にアクセス<br>2. 存在しないメールアドレスを入力<br>3. 任意のパスワードを入力<br>4. ログインボタンをクリック |
| **期待結果** | - ログイン画面に留まる<br>- 「メールアドレスまたはパスワードが正しくありません」のエラーメッセージが表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-AUTH-004: ログイン - 必須項目未入力（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-004 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - ログアウト状態 |
| **テスト手順** | 1. ログイン画面にアクセス<br>2. メールアドレスまたはパスワードを空欄のまま<br>3. ログインボタンをクリック |
| **期待結果** | - 「メールアドレスを入力してください」または「パスワードを入力してください」のバリデーションエラーが表示される<br>- ログインボタンが無効化される、またはAPI呼び出しが行われない |
| **実施結果** | |
| **備考** | |

---

#### TC-AUTH-005: ログアウト成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-005 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み状態 |
| **テスト手順** | 1. ダッシュボードまたは任意の画面にアクセス<br>2. ヘッダーのログアウトボタンをクリック |
| **期待結果** | - ログイン画面（S-01）に遷移する<br>- トークンが削除される<br>- 再度ダッシュボードにアクセスしようとするとログイン画面にリダイレクトされる |
| **実施結果** | |
| **備考** | |

---

#### TC-AUTH-006: 未認証状態での保護されたページアクセス（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-006 |
| **優先度** | P0 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - ログアウト状態<br>- トークンが存在しない |
| **テスト手順** | 1. URLを直接入力して、ダッシュボード（S-02）や日報一覧（S-03）にアクセス |
| **期待結果** | - ログイン画面（S-01）にリダイレクトされる<br>- 保護されたページは表示されない |
| **実施結果** | |
| **備考** | 全ての保護されたページで実施 |

---

#### TC-AUTH-007: トークン有効期限切れ（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-007 |
| **優先度** | P1 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - ログイン済み状態<br>- トークンの有効期限が切れている |
| **テスト手順** | 1. ログイン後、トークンの有効期限が切れるまで待つ（または手動でトークンを期限切れに変更）<br>2. 任意のAPI呼び出しを行う |
| **期待結果** | - 401 Unauthorizedエラーが返される<br>- ログイン画面にリダイレクトされる<br>- 「セッションが期限切れです。再度ログインしてください。」のメッセージが表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-AUTH-008: ログインユーザー情報取得（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-AUTH-008 |
| **優先度** | P1 |
| **カテゴリ** | API |
| **前提条件** | - ログイン済み状態 |
| **テスト手順** | 1. GET /api/auth/me を呼び出す |
| **期待結果** | - 200 OKが返される<br>- ログインユーザーの情報（employee_id, name, email, department, position, manager_id）が返される |
| **実施結果** | |
| **備考** | |

---

### 日報機能テスト

#### TC-REPORT-001: 日報作成成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-001 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業または上長でログイン済み<br>- 本日の日報が未作成 |
| **テスト手順** | 1. ダッシュボードから「日報作成」ボタンをクリック<br>2. 報告日に本日の日付を選択<br>3. 訪問記録を最低1件入力（顧客選択、訪問時刻、訪問内容）<br>4. Problem（課題）を入力<br>5. Plan（明日の予定）を入力<br>6. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面（S-05）に遷移する<br>- 入力した内容が正しく表示される<br>- 「日報を作成しました」の成功メッセージが表示される<br>- データベースに日報と訪問記録が保存される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-002: 日報作成 - 訪問記録複数件（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-002 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業または上長でログイン済み<br>- 本日の日報が未作成 |
| **テスト手順** | 1. 日報作成画面にアクセス<br>2. 訪問記録を3件追加（「追加」ボタンを使用）<br>3. 各訪問記録に異なる顧客、訪問時刻、訪問内容を入力<br>4. Problem、Planを入力<br>5. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 3件の訪問記録が全て正しく表示される<br>- 訪問時刻順に並んでいる（任意） |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-003: 日報作成 - 訪問記録なし（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-003 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 営業または上長でログイン済み |
| **テスト手順** | 1. 日報作成画面にアクセス<br>2. 訪問記録を入力せず（または全て削除）<br>3. Problem、Planのみ入力<br>4. 保存ボタンをクリック |
| **期待結果** | - 日報作成画面に留まる<br>- 「訪問記録は最低1件必要です」のバリデーションエラーが表示される<br>- データベースには保存されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-004: 日報作成 - 必須項目未入力（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-004 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 営業または上長でログイン済み |
| **テスト手順** | 1. 日報作成画面にアクセス<br>2. 訪問記録で顧客名、訪問時刻、または訪問内容を空欄にする<br>3. 保存ボタンをクリック |
| **期待結果** | - 「顧客名は必須です」「訪問時刻は必須です」「訪問内容は必須です」のバリデーションエラーが表示される<br>- データベースには保存されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-005: 日報作成 - 文字数制限超過（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-005 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 営業または上長でログイン済み |
| **テスト手順** | 1. 日報作成画面にアクセス<br>2. 訪問内容に501文字以上を入力<br>3. Problemに1001文字以上を入力<br>4. Planに1001文字以上を入力<br>5. 保存ボタンをクリック |
| **期待結果** | - 「訪問内容は500文字以内で入力してください」<br>- 「課題は1000文字以内で入力してください」<br>- 「予定は1000文字以内で入力してください」のバリデーションエラーが表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-006: 日報作成 - 同一日の重複作成（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-006 |
| **優先度** | P1 |
| **カテゴリ** | ビジネスロジック |
| **前提条件** | - 営業でログイン済み<br>- 本日の日報が既に作成済み |
| **テスト手順** | 1. 日報作成画面にアクセス<br>2. 報告日に本日の日付を選択<br>3. 訪問記録、Problem、Planを入力<br>4. 保存ボタンをクリック |
| **期待結果** | - 409 Conflictエラーが返される<br>- 「指定日の日報は既に作成されています」のエラーメッセージが表示される<br>- 既存の日報は上書きされない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-007: 日報一覧取得（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-007 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が複数件存在する |
| **テスト手順** | 1. ダッシュボードから「日報一覧」ボタンをクリック |
| **期待結果** | - 日報一覧画面（S-03）が表示される<br>- 自分の日報のみが表示される（他の営業の日報は表示されない）<br>- 報告日の降順で表示される<br>- 各日報の報告日、訪問件数、コメント数が表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-008: 日報一覧取得 - 上長（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-008 |
| **優先度** | P0 |
| **カテゴリ** | 権限制御 |
| **前提条件** | - 上長でログイン済み<br>- 自分と部下の日報が複数件存在する |
| **テスト手順** | 1. 日報一覧画面にアクセス |
| **期待結果** | - 自分の日報と部下の日報が表示される<br>- 営業担当者名が表示される<br>- 部下でない営業の日報は表示されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-009: 日報一覧 - 期間絞り込み（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-009 |
| **優先度** | P1 |
| **カテゴリ** | 検索 |
| **前提条件** | - ログイン済み<br>- 日報が複数日付で存在する |
| **テスト手順** | 1. 日報一覧画面にアクセス<br>2. 報告日Fromに「2026-01-01」を入力<br>3. 報告日Toに「2026-01-31」を入力<br>4. 検索ボタンをクリック |
| **期待結果** | - 指定した期間内の日報のみが表示される<br>- 期間外の日報は表示されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-010: 日報一覧 - ページネーション（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-010 |
| **優先度** | P2 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 日報が21件以上存在する（ページネーションが発生する件数） |
| **テスト手順** | 1. 日報一覧画面にアクセス<br>2. ページ2をクリック |
| **期待結果** | - 2ページ目の日報が表示される（21件目以降）<br>- ページネーション情報が正しく表示される（現在ページ、総ページ数） |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-011: 日報詳細表示（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-011 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 閲覧権限のある日報が存在する |
| **テスト手順** | 1. 日報一覧画面から「詳細」ボタンをクリック |
| **期待結果** | - 日報詳細画面（S-05）が表示される<br>- 報告日、営業担当者名、Problem、Planが表示される<br>- 訪問記録が全て表示される（顧客名、訪問時刻、訪問内容）<br>- コメントが全て表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-012: 日報詳細 - 他人の日報へのアクセス（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-012 |
| **優先度** | P0 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - 営業Aでログイン済み<br>- 営業Bの日報が存在する（営業Aは営業Bの部下ではない） |
| **テスト手順** | 1. URLを直接入力して営業Bの日報詳細画面にアクセス（例: /daily-reports/123） |
| **期待結果** | - 403 Forbiddenエラーが返される<br>- 「この日報を閲覧する権限がありません」のエラーメッセージが表示される<br>- 日報の内容は表示されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-013: 日報編集成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-013 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が存在する |
| **テスト手順** | 1. 日報詳細画面から「編集」ボタンをクリック<br>2. Problemの内容を変更<br>3. 訪問記録を1件追加<br>4. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 変更した内容が反映されている<br>- 「日報を更新しました」の成功メッセージが表示される<br>- 更新日時が更新される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-014: 日報編集 - 訪問記録の削除（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-014 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報に訪問記録が3件存在する |
| **テスト手順** | 1. 日報編集画面にアクセス<br>2. 訪問記録の1件を削除ボタンで削除<br>3. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 削除した訪問記録は表示されない<br>- 残りの2件の訪問記録は正しく表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-015: 日報編集 - 最後の訪問記録を削除（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-015 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報に訪問記録が1件のみ存在する |
| **テスト手順** | 1. 日報編集画面にアクセス<br>2. 唯一の訪問記録を削除ボタンで削除しようとする<br>3. 保存ボタンをクリック |
| **期待結果** | - 「訪問記録は最低1件必要です」のバリデーションエラーが表示される<br>- 削除ボタンが無効化される、または削除できない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-016: 日報編集 - 他人の日報（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-016 |
| **優先度** | P0 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - 営業Aでログイン済み<br>- 営業Bの日報が存在する |
| **テスト手順** | 1. URLを直接入力して営業Bの日報編集画面にアクセス（例: /daily-reports/123/edit） |
| **期待結果** | - 403 Forbiddenエラーが返される<br>- 「この日報を編集する権限がありません」のエラーメッセージが表示される<br>- 編集画面は表示されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-017: 日報削除成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-017 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が存在する |
| **テスト手順** | 1. 日報詳細画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 日報一覧画面（S-03）に遷移する<br>- 「日報を削除しました」の成功メッセージが表示される<br>- 削除した日報は一覧に表示されない<br>- データベースから日報と関連する訪問記録が削除される |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-018: 日報削除 - キャンセル（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-018 |
| **優先度** | P2 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が存在する |
| **テスト手順** | 1. 日報詳細画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「キャンセル」をクリック |
| **期待結果** | - 確認ダイアログが閉じる<br>- 日報詳細画面に留まる<br>- 日報は削除されない |
| **実施結果** | |
| **備考** | |

---

#### TC-REPORT-019: 日報削除 - 他人の日報（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-REPORT-019 |
| **優先度** | P0 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - 営業Aでログイン済み<br>- 営業Bの日報が存在する |
| **テスト手順** | 1. API経由で営業Bの日報を削除するリクエストを送信（DELETE /api/daily-reports/123） |
| **期待結果** | - 403 Forbiddenエラーが返される<br>- 「この日報を削除する権限がありません」のエラーメッセージが返される<br>- 日報は削除されない |
| **実施結果** | |
| **備考** | |

---

### 訪問記録機能テスト

#### TC-VISIT-001: 訪問記録追加成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-VISIT-001 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が存在する |
| **テスト手順** | 1. 日報編集画面にアクセス<br>2. 「訪問記録を追加」ボタンをクリック<br>3. 新しい訪問記録の入力欄が表示される<br>4. 顧客名、訪問時刻、訪問内容を入力<br>5. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 追加した訪問記録が表示される<br>- 既存の訪問記録も維持されている |
| **実施結果** | |
| **備考** | |

---

#### TC-VISIT-002: 訪問記録更新成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-VISIT-002 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報に訪問記録が存在する |
| **テスト手順** | 1. 日報編集画面にアクセス<br>2. 既存の訪問記録の訪問内容を変更<br>3. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 変更した訪問内容が反映されている |
| **実施結果** | |
| **備考** | |

---

#### TC-VISIT-003: 訪問記録削除成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-VISIT-003 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報に訪問記録が2件以上存在する |
| **テスト手順** | 1. 日報編集画面にアクセス<br>2. 訪問記録の削除ボタンをクリック<br>3. 保存ボタンをクリック |
| **期待結果** | - 日報詳細画面に遷移する<br>- 削除した訪問記録は表示されない<br>- 他の訪問記録は維持されている |
| **実施結果** | |
| **備考** | |

---

#### TC-VISIT-004: 訪問時刻の形式チェック（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-VISIT-004 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 営業でログイン済み |
| **テスト手順** | 1. 日報作成または編集画面にアクセス<br>2. 訪問時刻に「25:00」や「12:60」など不正な時刻を入力<br>3. 保存ボタンをクリック |
| **期待結果** | - 「訪問時刻の形式が正しくありません（HH:MM）」のバリデーションエラーが表示される<br>- 保存されない |
| **実施結果** | |
| **備考** | |

---

### コメント機能テスト

#### TC-COMMENT-001: コメント投稿成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-001 |
| **優先度** | P0 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 上長でログイン済み<br>- 部下の日報が存在する |
| **テスト手順** | 1. 部下の日報詳細画面にアクセス<br>2. コメント入力欄にコメント内容を入力<br>3. 投稿ボタンをクリック |
| **期待結果** | - コメントが一覧に追加表示される<br>- コメント者名、コメント内容、投稿日時が表示される<br>- 「コメントを投稿しました」の成功メッセージが表示される<br>- 入力欄がクリアされる |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-002: コメント投稿 - 空欄（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-002 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 上長でログイン済み<br>- 部下の日報が存在する |
| **テスト手順** | 1. 部下の日報詳細画面にアクセス<br>2. コメント入力欄を空欄のまま<br>3. 投稿ボタンをクリック |
| **期待結果** | - 「コメント内容を入力してください」のバリデーションエラーが表示される<br>- コメントは投稿されない |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-003: コメント投稿 - 文字数制限超過（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-003 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 上長でログイン済み<br>- 部下の日報が存在する |
| **テスト手順** | 1. 部下の日報詳細画面にアクセス<br>2. コメント入力欄に501文字以上を入力<br>3. 投稿ボタンをクリック |
| **期待結果** | - 「コメントは500文字以内で入力してください」のバリデーションエラーが表示される<br>- コメントは投稿されない |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-004: コメント投稿 - 営業による投稿（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-004 |
| **優先度** | P0 |
| **カテゴリ** | 権限制御 |
| **前提条件** | - 営業でログイン済み<br>- 自分の日報が存在する |
| **テスト手順** | 1. 自分の日報詳細画面にアクセス<br>2. コメント投稿フォームが表示されているか確認 |
| **期待結果** | - コメント投稿フォームは表示されない（上長・管理者のみ）<br>- または投稿しようとすると403 Forbiddenエラーが返される |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-005: コメント削除成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-005 |
| **優先度** | P2 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 上長でログイン済み<br>- 自分が投稿したコメントが存在する |
| **テスト手順** | 1. 日報詳細画面にアクセス<br>2. 自分のコメントの削除ボタンをクリック<br>3. 確認ダイアログで「OK」をクリック |
| **期待結果** | - コメントが一覧から削除される<br>- 「コメントを削除しました」の成功メッセージが表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-006: コメント削除 - 他人のコメント（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-006 |
| **優先度** | P1 |
| **カテゴリ** | セキュリティ |
| **前提条件** | - 上長Aでログイン済み<br>- 上長Bが投稿したコメントが存在する |
| **テスト手順** | 1. API経由で上長Bのコメントを削除するリクエストを送信（DELETE /api/comments/123） |
| **期待結果** | - 403 Forbiddenエラーが返される<br>- 「このコメントを削除する権限がありません」のエラーメッセージが返される<br>- コメントは削除されない |
| **実施結果** | |
| **備考** | |

---

#### TC-COMMENT-007: コメント一覧表示（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-COMMENT-007 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 日報に複数のコメントが存在する |
| **テスト手順** | 1. 日報詳細画面にアクセス |
| **期待結果** | - 全てのコメントが表示される<br>- コメント者名、コメント内容、投稿日時が表示される<br>- 投稿日時の昇順（または降順）で表示される |
| **実施結果** | |
| **備考** | |

---

### 顧客マスタテスト

#### TC-CUSTOMER-001: 顧客作成成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-001 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み |
| **テスト手順** | 1. 顧客一覧画面から「新規登録」ボタンをクリック<br>2. 顧客名、住所、電話番号、メールアドレス、担当営業を入力<br>3. 保存ボタンをクリック |
| **期待結果** | - 顧客一覧画面（S-06）に遷移する<br>- 「顧客を登録しました」の成功メッセージが表示される<br>- 一覧に新しい顧客が表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-002: 顧客作成 - 必須項目のみ（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-002 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み |
| **テスト手順** | 1. 顧客登録画面にアクセス<br>2. 顧客名と担当営業のみ入力（住所、電話番号、メールアドレスは空欄）<br>3. 保存ボタンをクリック |
| **期待結果** | - 顧客一覧画面に遷移する<br>- 顧客が正常に登録される<br>- 任意項目は空で保存される |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-003: 顧客作成 - 必須項目未入力（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-003 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - ログイン済み |
| **テスト手順** | 1. 顧客登録画面にアクセス<br>2. 顧客名または担当営業を空欄にする<br>3. 保存ボタンをクリック |
| **期待結果** | - 「顧客名は必須です」または「担当営業は必須です」のバリデーションエラーが表示される<br>- 顧客は登録されない |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-004: 顧客作成 - メールアドレス形式エラー（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-004 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - ログイン済み |
| **テスト手順** | 1. 顧客登録画面にアクセス<br>2. メールアドレスに「invalid-email」など不正な形式を入力<br>3. 保存ボタンをクリック |
| **期待結果** | - 「メールアドレスの形式が正しくありません」のバリデーションエラーが表示される<br>- 顧客は登録されない |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-005: 顧客一覧取得（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-005 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 顧客が複数件存在する |
| **テスト手順** | 1. ダッシュボードから「顧客一覧」ボタンをクリック |
| **期待結果** | - 顧客一覧画面（S-06）が表示される<br>- 顧客ID、顧客名、電話番号、メールアドレス、担当営業名が表示される<br>- ページネーションが機能する |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-006: 顧客検索 - 顧客名（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-006 |
| **優先度** | P1 |
| **カテゴリ** | 検索 |
| **前提条件** | - ログイン済み<br>- 顧客「株式会社テストA」が存在する |
| **テスト手順** | 1. 顧客一覧画面にアクセス<br>2. 顧客名検索欄に「テストA」を入力<br>3. 検索ボタンをクリック |
| **期待結果** | - 「テストA」を含む顧客のみが表示される<br>- 部分一致検索が機能する |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-007: 顧客更新成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-007 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 顧客が存在する |
| **テスト手順** | 1. 顧客一覧画面から「編集」ボタンをクリック<br>2. 住所を変更<br>3. 保存ボタンをクリック |
| **期待結果** | - 顧客一覧画面に遷移する<br>- 「顧客情報を更新しました」の成功メッセージが表示される<br>- 変更した住所が反映されている |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-008: 顧客削除成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-008 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - ログイン済み<br>- 訪問記録で使用されていない顧客が存在する |
| **テスト手順** | 1. 顧客一覧画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 「顧客を削除しました」の成功メッセージが表示される<br>- 削除した顧客は一覧に表示されない<br>- データベースから削除される |
| **実施結果** | |
| **備考** | |

---

#### TC-CUSTOMER-009: 顧客削除 - 使用中の顧客（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-CUSTOMER-009 |
| **優先度** | P1 |
| **カテゴリ** | ビジネスロジック |
| **前提条件** | - ログイン済み<br>- 訪問記録で使用されている顧客が存在する |
| **テスト手順** | 1. 顧客一覧画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 409 Conflictエラーが返される<br>- 「この顧客は訪問記録で使用されているため削除できません」のエラーメッセージが表示される<br>- 顧客は削除されない |
| **実施結果** | |
| **備考** | |

---

### 営業マスタテスト

#### TC-EMPLOYEE-001: 営業作成成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-001 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 管理者でログイン済み |
| **テスト手順** | 1. 営業マスタ一覧画面から「新規登録」ボタンをクリック<br>2. 社員名、メールアドレス、パスワード、部署、役職を入力<br>3. 上長を選択<br>4. 保存ボタンをクリック |
| **期待結果** | - 営業マスタ一覧画面（S-08）に遷移する<br>- 「社員を登録しました」の成功メッセージが表示される<br>- 一覧に新しい社員が表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-002: 営業作成 - パスワード確認不一致（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-002 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 管理者でログイン済み |
| **テスト手順** | 1. 営業マスタ登録画面にアクセス<br>2. パスワードに「Password123」を入力<br>3. パスワード（確認）に「Password456」を入力<br>4. 保存ボタンをクリック |
| **期待結果** | - 「パスワードが一致しません」のバリデーションエラーが表示される<br>- 社員は登録されない |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-003: 営業作成 - メールアドレス重複（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-003 |
| **優先度** | P1 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 管理者でログイン済み<br>- 「test@example.com」のメールアドレスを持つ社員が既に存在する |
| **テスト手順** | 1. 営業マスタ登録画面にアクセス<br>2. メールアドレスに「test@example.com」を入力<br>3. その他の項目を入力<br>4. 保存ボタンをクリック |
| **期待結果** | - 409 Conflictエラーが返される<br>- 「このメールアドレスは既に使用されています」のエラーメッセージが表示される<br>- 社員は登録されない |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-004: 営業作成 - パスワード強度不足（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-004 |
| **優先度** | P2 |
| **カテゴリ** | バリデーション |
| **前提条件** | - 管理者でログイン済み |
| **テスト手順** | 1. 営業マスタ登録画面にアクセス<br>2. パスワードに「12345」など8文字未満、または英数字を含まないパスワードを入力<br>3. 保存ボタンをクリック |
| **期待結果** | - 「パスワードは8文字以上で、英数字を含む必要があります」のバリデーションエラーが表示される<br>- 社員は登録されない |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-005: 営業一覧取得 - 管理者のみ（権限制御）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-005 |
| **優先度** | P0 |
| **カテゴリ** | 権限制御 |
| **前提条件** | - 営業でログイン済み |
| **テスト手順** | 1. URLを直接入力して営業マスタ一覧画面にアクセス（/employees） |
| **期待結果** | - 403 Forbiddenエラーが返される<br>- 「この機能にアクセスする権限がありません」のエラーメッセージが表示される<br>- 営業マスタ一覧は表示されない |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-006: 営業更新成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-006 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 管理者でログイン済み<br>- 社員が存在する |
| **テスト手順** | 1. 営業マスタ一覧画面から「編集」ボタンをクリック<br>2. 役職を「営業」から「主任」に変更<br>3. 保存ボタンをクリック |
| **期待結果** | - 営業マスタ一覧画面に遷移する<br>- 「社員情報を更新しました」の成功メッセージが表示される<br>- 変更した役職が反映されている |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-007: 営業削除成功（正常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-007 |
| **優先度** | P1 |
| **カテゴリ** | 正常系 |
| **前提条件** | - 管理者でログイン済み<br>- 日報や顧客で使用されていない社員が存在する |
| **テスト手順** | 1. 営業マスタ一覧画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 「社員を削除しました」の成功メッセージが表示される<br>- 削除した社員は一覧に表示されない<br>- データベースから削除される |
| **実施結果** | |
| **備考** | |

---

#### TC-EMPLOYEE-008: 営業削除 - 使用中の社員（異常系）

| 項目 | 内容 |
|------|------|
| **テストID** | TC-EMPLOYEE-008 |
| **優先度** | P1 |
| **カテゴリ** | ビジネスロジック |
| **前提条件** | - 管理者でログイン済み<br>- 日報や顧客で使用されている社員が存在する |
| **テスト手順** | 1. 営業マスタ一覧画面から「削除」ボタンをクリック<br>2. 確認ダイアログで「OK」をクリック |
| **期待結果** | - 409 Conflictエラーが返される<br>- 「この社員は日報や顧客で使用されているため削除できません」のエラーメッセージが表示される<br>- 社員は削除されない |
| **実施結果** | |
| **備考** | |

---

## 非機能テスト

### パフォーマンステスト

#### TC-PERF-001: レスポンス時間 - 日報一覧取得

| 項目 | 内容 |
|------|------|
| **テストID** | TC-PERF-001 |
| **テスト内容** | 日報一覧取得のレスポンス時間を測定 |
| **測定条件** | - データ件数: 1000件<br>- ページサイズ: 20件 |
| **目標値** | - レスポンス時間: 500ms以内 |
| **実施結果** | |
| **備考** | |

---

#### TC-PERF-002: 同時接続数

| 項目 | 内容 |
|------|------|
| **テストID** | TC-PERF-002 |
| **テスト内容** | 同時に複数ユーザーがアクセスした場合のシステム動作 |
| **測定条件** | - 同時ユーザー数: 100人<br>- 操作: 日報作成、一覧取得 |
| **目標値** | - エラー率: 1%以下<br>- レスポンス時間: 2秒以内 |
| **実施結果** | |
| **備考** | |

---

### セキュリティテスト

#### TC-SEC-001: SQLインジェクション対策

| 項目 | 内容 |
|------|------|
| **テストID** | TC-SEC-001 |
| **テスト内容** | 検索欄にSQLインジェクション攻撃のコードを入力 |
| **テスト手順** | 1. 顧客名検索欄に「' OR '1'='1」を入力<br>2. 検索ボタンをクリック |
| **期待結果** | - SQLインジェクションが実行されない<br>- エラーまたは検索結果なしが返される<br>- データベースに影響がない |
| **実施結果** | |
| **備考** | |

---

#### TC-SEC-002: XSS（クロスサイトスクリプティング）対策

| 項目 | 内容 |
|------|------|
| **テストID** | TC-SEC-002 |
| **テスト内容** | 入力欄にJavaScriptコードを入力 |
| **テスト手順** | 1. 日報のProblem欄に「<script>alert('XSS')</script>」を入力<br>2. 保存して詳細画面で表示 |
| **期待結果** | - スクリプトが実行されない<br>- エスケープ処理されて「&lt;script&gt;alert('XSS')&lt;/script&gt;」として表示される |
| **実施結果** | |
| **備考** | |

---

#### TC-SEC-003: CSRF（クロスサイトリクエストフォージェリ）対策

| 項目 | 内容 |
|------|------|
| **テストID** | TC-SEC-003 |
| **テスト内容** | 外部サイトから不正なリクエストを送信 |
| **テスト手順** | 1. 外部のHTMLファイルを作成し、日報削除のPOSTリクエストを送信するフォームを配置<br>2. ログイン済みの状態で外部HTMLを開く |
| **期待結果** | - CSRFトークンがないため、リクエストが拒否される<br>- 403 Forbiddenエラーが返される<br>- 日報は削除されない |
| **実施結果** | |
| **備考** | |

---

#### TC-SEC-004: パスワードのハッシュ化

| 項目 | 内容 |
|------|------|
| **テストID** | TC-SEC-004 |
| **テスト内容** | データベースにパスワードが平文で保存されていないことを確認 |
| **テスト手順** | 1. 新規社員を作成<br>2. データベースの社員テーブルを直接確認 |
| **期待結果** | - パスワードがハッシュ化されて保存されている<br>- 平文のパスワードは確認できない |
| **実施結果** | |
| **備考** | bcrypt、Argon2などのハッシュアルゴリズムを使用 |

---

### ユーザビリティテスト

#### TC-UI-001: レスポンシブデザイン - スマートフォン

| 項目 | 内容 |
|------|------|
| **テストID** | TC-UI-001 |
| **テスト内容** | スマートフォンでの表示と操作性 |
| **テスト環境** | - iPhone 14 (iOS 17)<br>- Galaxy S23 (Android 13) |
| **確認項目** | - レイアウトが崩れていない<br>- ボタンがタップしやすいサイズ<br>- テーブルが横スクロール可能<br>- フォーム入力がしやすい |
| **実施結果** | |
| **備考** | |

---

#### TC-UI-002: レスポンシブデザイン - タブレット

| 項目 | 内容 |
|------|------|
| **テストID** | TC-UI-002 |
| **テスト内容** | タブレットでの表示と操作性 |
| **テスト環境** | - iPad Pro (iPadOS 17)<br>- Galaxy Tab (Android 13) |
| **確認項目** | - レイアウトが適切に表示される<br>- 画面を有効活用できている<br>- タッチ操作が快適 |
| **実施結果** | |
| **備考** | |

---

#### TC-UI-003: ブラウザ互換性

| 項目 | 内容 |
|------|------|
| **テストID** | TC-UI-003 |
| **テスト内容** | 各ブラウザでの動作確認 |
| **テスト環境** | - Chrome 最新版<br>- Safari 最新版<br>- Firefox 最新版<br>- Edge 最新版 |
| **確認項目** | - 全ての機能が正常に動作する<br>- レイアウトが崩れない<br>- JavaScriptエラーが発生しない |
| **実施結果** | |
| **備考** | |

---

## テスト実施記録

### テスト実施サマリー

| テスト実施日 | テスト担当者 | テスト環境 | 実施項目数 | 合格 | 不合格 | 未実施 |
|------------|------------|----------|----------|------|--------|--------|
| 2026-01-XX | - | - | 95 | - | - | - |

### 不具合管理

| 不具合ID | 発見日 | テストID | 不具合内容 | 優先度 | ステータス | 修正予定日 |
|---------|-------|---------|----------|--------|----------|-----------|
| BUG-001 | - | - | - | - | - | - |

### 不具合ステータス定義

| ステータス | 説明 |
|----------|------|
| Open | 未対応 |
| In Progress | 対応中 |
| Fixed | 修正完了（テスト待ち） |
| Verified | テストで修正確認済み |
| Closed | クローズ |
| Rejected | 不具合ではないと判断 |

---

## 改訂履歴

| 版数 | 改訂日 | 改訂者 | 改訂内容 |
|------|--------|--------|----------|
| 1.0 | 2026-01-04 | - | 初版作成 |
